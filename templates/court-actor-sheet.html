<form class="{{cssClass}} actor-sheet" autocomplete="off">

  <section id="character-{{actor._id}}-name-alias" class="flex-horizontal name-alias">

    <div class="grow-two">
    <img src="{{actor.img}}" data-edit="img" title="{{actor.name}}" class="portrait" />
    </div>

    <div class="grow-two">
      <div id="character-{{actor._id}}-name-box">
        <label for="character-{{actor._id}}-name">{{localize "BITD.Name"}}</label>
        <input type="text" id="character-{{actor._id}}-name" class="name" name="name" value="{{actor.name}}">
      </div>

      <div id="character-{{actor._id}}-traits" class="flex-column">

        <div class="item-block flex-horizontal">
          <div class="item-class-label"><a class="item-add-popup" data-distinct="true" data-item-type="heritage">{{localize "BITD.Heritage"}}</a></div>
          {{#each actor.items as |item id|}}
              {{#if (eq item.type "heritage")}}
              <div class="item flex-horizontal" data-item-id="{{item._id}}">
                <div class="item-body flex-horizontal">
                  <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                  <div class="item-name">{{item.name}}</div>
                </div>
                <a class="item-control item-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
              </div>
              {{/if}}
          {{/each}}
        </div>

        <div class="item-block flex-horizontal">
          <div class="item-class-label"><a class="item-add-popup" data-distinct="true" data-item-type="background">{{localize "BITD.Background"}}</a></div>
          {{#each actor.items as |item id|}}
            {{#if (eq item.type "background")}}
            <div class="item flex-horizontal" data-item-id="{{item._id}}">
              <div class="item-body flex-horizontal">
                <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                <div class="item-name">{{item.name}}</div>
              </div>
              <a class="item-control item-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
            </div>
            {{/if}}
          {{/each}}
        </div>

        <div class="item-block flex-horizontal">
          <div class="item-class-label"><a class="item-add-popup" data-distinct="true" data-item-type="vice">{{localize "BITD.Vice"}}</a></div>
          {{#each actor.items as |item id|}}
              {{#if (eq item.type "vice")}}
              <div class="item flex-horizontal" data-item-id="{{item._id}}">
                <div class="item-body flex-horizontal">
                  <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                  <div class="item-name">{{item.name}}</div>
                </div>
                <a class="item-control item-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
              </div>
              {{/if}}
          {{/each}}
        </div>

        <div class="item-block flex-horizontal">
          <div class="item-class-label"><a class="item-add-popup" data-distinct="true" data-item-type="class">{{localize "BITD.Class"}}</a></div>
            {{#each actor.items as |item id|}}
                {{#if (eq item.type "class")}}
                <div class="item flex-horizontal" data-item-id="{{item._id}}">
                  <div class="item-body flex-horizontal">
                    <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                    <div class="item-name">{{item.name}}</div>
                  </div>
                  <a class="item-control item-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
                </div>
                {{/if}}
            {{/each}}
          </div>

      </div>
    </div>

    <div class="grow-two">
      <div id="character-{{actor._id}}-alias-box">
        <label for="character-{{actor._id}}-alias">{{localize "BITD.Alias"}}</label>
        <input type="text" id="character-{{actor._id}}-alias" class="alias" name="data.alias" value="{{data.alias}}">
      </div>

      {{> "systems/blades-in-the-dark/templates/parts/coins.html" actor=actor}}
    </div>

  </section>

  {{!-- Experience --}}
  <section class="flex experience">
  </section>
  {{!-- Stress and Trauma --}}
  <div id="character-{{actor._id}}-stress-trauma" class="section">
    <div id="character-{{actor._id}}-stress" class="character-stress">

      <label class="black-label stress-label">{{localize data.stress.name}}</label>
      <label class="black-label" for="character-{{actor._id}}-trauma-counter-0">{{localize data.trauma.name}}</label>

      {{> "modules/court-of-blades/templates/stress.html" actor=actor}}

    </div>
  </div>

  {{!-- Harm, Healing and Armor --}}
  <section id="character-{{actor._id}}-harm-armor" class="flex harm-armor">
    <div id="character-{{actor._id}}-character-harm" class="character-harm">
      <table>
        <thead>
          <th class="black-white" colspan="4">{{localize "BITD.Harm"}}</th>
          <th class="black-white"><label>{{localize "BITD.Healing"}}</label></th>
          <th class="black-white">{{localize "BITD.Armor"}}</th>
        </thead>
        <tbody>
          <tr>
            <td>3</td>
            <td colspan="2">
              <input type="text" id="character-{{actor._id}}-harm-3-1" name="data.harm.heavy.one" value="{{data.harm.heavy.one}}">
            </td>
            <td>{{localize "BITD.NeedHelp"}}</td>
            <td rowspan="3">
              <div id="character-{{actor._id}}-health-clock" class="character-health-clock">
                {{{blades-clock "data.healing-clock" 4 data.healing-clock actor._id}}}
              </div>
            </td>
            <td rowspan="3" id="character-{{actor._id}}-armor-uses" class="character-armor-uses">
              <div>
                <label for="character-{{actor._id}}-armor-uses-armor">{{localize "BITD.Armor"}}</label>
                <input id="character-{{actor._id}}-armor-uses-armor" type="checkbox" name="data.armor-uses.armor" {{checked data.armor-uses.armor}}>
              </div>
              <div>
                <label for="character-{{actor._id}}-armor-uses-heavy">{{localize "BITD.Heavy"}}</label>
                <input id="character-{{actor._id}}-armor-uses-heavy" type="checkbox" name="data.armor-uses.heavy" {{checked data.armor-uses.heavy}}>
              </div>
              <div>
                <label for="character-{{actor._id}}-armor-uses-special">{{localize "BITD.Special"}}</label>
                <input id="character-{{actor._id}}-armor-uses-special" type="checkbox" name="data.armor-uses.special" {{checked data.armor-uses.special}}>
              </div>
            </td>
          </tr>
          <tr>
            <td>2</td>
            <td>
              <input type="text" id="character-{{actor._id}}-harm-2-1" name="data.harm.medium.one" value="{{data.harm.medium.one}}">
            </td>
            <td>
              <input type="text" id="character-{{actor._id}}-harm-2-2" name="data.harm.medium.two" value="{{data.harm.medium.two}}">
            </td>
            <td>-1D</td>
          </tr>
          <tr>
            <td>1</td>
            <td>
              <input type="text" id="character-{{actor._id}}-harm-1-1" name="data.harm.light.one" value="{{data.harm.light.one}}">
            </td>
            <td>
              <input type="text" id="character-{{actor._id}}-harm-1-2" name="data.harm.light.two" value="{{data.harm.light.two}}">
            </td>
            <td>{{localize "BITD.LessEffect"}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>




  {{!-- Attributes --}}
  <section class="flex-horizontal">

    <div class="tab-content flex-vertical grow-two">

      {{!-- Nav menu --}}
      <nav class="tabs flex-horizontal">
        <a class="item" data-tab="abilities">{{localize "BITD.Abilities"}}</a>
        <a class="item" data-tab="loadout">{{localize "BITD.Loadout"}}</a>
        <a class="item" data-tab="character-notes">{{localize "BITD.Notes"}}</a>
        {{#if isGM}}
          <a class="item" data-tab="effects">{{localize "BITD.Effects"}}</a>
        {{/if}}
        <a class="item" data-tab="all-character-items">{{localize "BITD.AllItems"}}</a>
        <a class="item" data-tab="paramour">{{localize "BITD.labelParamour"}}</a>
      </nav>

      <div id="character-{{actor._id}}-abilities" class="tab flex-vertical abilities" data-tab="abilities">
        <div class="label-stripe">
          <p><label for="character-{{actor._id}}-experience-0">{{localize "BITD.Abilities"}}</label></p>
          <p><a class="item-add-popup" data-item-type="ability"><i class="fas fa-plus-square"></i></a></p>
          <div id="character-{{actor._id}}-experience" class="teeth-experience">
            <label for="character-{{actor._id}}-experience-0"><i class="fab fa-creative-commons-zero nullifier"></i></label>
            {{#multiboxes data.experience}}
            <input type="radio" id="character-{{actor._id}}-experience-0" name="data.experience" value="0" dtype="Radio">
            {{#times_from_1 data.experience_max}}
            <input type="radio" id="character-{{actor._id}}-experience-{{this}}" name="data.experience" value="{{this}}" dtype="Radio">
            <label for="character-{{actor._id}}-experience-{{this}}"></label>
            {{/times_from_1}}
            {{/multiboxes}}
          </div>
        </div>

        <div id="character-{{actor._id}}-abilities-list">
          {{#each actor.items as |item id|}}
          {{#if (eq item.type "ability")}}
            <div class="item flex-horizontal" data-item-id="{{item._id}}">
              <div class="item-body flex-horizontal">
                <b><div class="item-name">{{item.name}}</div></b>
                <div class="item-description">{{{item.data.description}}}</div>
              </div>
              <a class="item-control item-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
            </div>
          {{/if}}
          {{/each}}
          <div class="item-class-label"><a class="item-add-popup" data-item-type="ability">{{localize "BITD.AddAbility"}}</a></div>
        </div>
      </div>

      {{!-- Owned Items Tab --}}
      <div id="character-{{actor._id}}-loadout" class="tab flex-vertical loadout" data-tab="loadout">
        <div class="label-stripe flex-horizontal">
           <p>{{localize "BITD.Loadout"}} <a class="item-add-popup" data-item-type="item"><i class="fas fa-plus-square"></i></a></p>
           <p>{{data.loadout}}/{{localize data.load_level}} </p>
           <div class="dropdown">
             <select name="data.selected_load_level">
               {{selectOptions load_levels selected=data.selected_load_level localize=true}}
             </select>
           </div>
        </div>
        <div>
          {{#each actor.items as |item id|}}
          {{#if (eq item.type "item")}}
            <div class="item flex-horizontal" data-item-id="{{item._id}}">
              <div class="item-body flex-horizontal">
                <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
                <div class="item-name">{{item.name}}</div>
                <div class="item-description">{{{item.data.description}}}</div>
              </div>
              <a class="item-control item-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
            </div>
          {{/if}}
          {{/each}}
          <div class="item-class-label"><a class="item-add-popup" data-item-type="item">{{localize "BITD.AddItem"}}</a></div>
        </div>
      </div>

      <div class="tab flex-vertical" data-tab="character-notes">
        <div class="label-stripe">
          <p>{{localize "BITD.Notes"}}</p>
        </div>
        <textarea rows="13" name="data.description">{{{data.description}}}</textarea>
      </div>

      {{!-- Active Effects --}}
      <div id="character-{{actor._id}}-effects" class="tab effects flex-vertical" data-tab="effects">
        <div class="label-stripe">
          <p>{{localize "BITD.Effects"}}</p>
        </div>
        {{> "systems/blades-in-the-dark/templates/parts/active-effects.html"}}
      </div>

      {{!-- Full Item List --}}
      <div class="tab grow-two flex-vertical" data-tab="all-character-items">
        <div class="label-stripe">
          <p><label>{{localize "BITD.AllItems"}}</label></p>
        </div>
        {{#each actor.items as |item id|}}
        <div class="item flex-horizontal" data-item-id="{{item._id}}">
          <div class="item-body item-sheet-open flex-horizontal">
            <img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/>
            <div class="item-name">{{item.name}}</div>
          </div>
          <a class="item-control item-delete" title="{{localize 'BITD.TitleDeleteItem'}}"><i class="fas fa-trash"></i></a>
        </div>
        {{/each}}
      </div>



      <div class="tab grow-two flex-vertical" data-tab="paramour">

        <div class="heart-body">
          <!-- <input type="radio" id="heart-{{actor._id}}-0" name="data.heart" value="0" checked="checked">
          <input type="radio" id="heart-{{actor._id}}-1" name="data.heart" value="1">
          <label for="heart-{{actor._id}}-1"></label>
          <input type="radio" id="heart-{{actor._id}}-2" name="data.heart" value="2">
          <label for="heart-{{actor._id}}-2"></label>
          <input type="radio" id="heart-{{actor._id}}-3" name="data.heart" value="3">
          <label for="heart-{{actor._id}}-3"></label>
          <input type="radio" id="heart-{{actor._id}}-4" name="data.heart" value="4">
          <label for="heart-{{actor._id}}-4"></label>
          <input type="radio" id="heart-{{actor._id}}-5" name="data.heart" value="5">
          <label for="heart-{{actor._id}}-5"></label>
          <input type="radio" id="heart-{{actor._id}}-6" name="data.heart" value="6">
          <label for="heart-{{actor._id}}-6"></label> -->
          {{#multiboxes data.heart}}
          {{#times_from_1 8}}
          <input type="radio" id="heart-{{actor._id}}-{{this}}"
                 name="data.heart" value="{{this}}">
          <label for="heart-{{actor._id}}-{{this}}"></label>
          {{/times_from_1}}
          {{/multiboxes}}


        </div>
        <div class="form-group paramour">
          <label class="black-label paramour-label">{{localize "BITD.labelParamour"}}:</label>
          <input type="text" name="data.paramour" value="{{data.paramour}}">
        </div>

        <div class="form-group paramour">
          <label class="black-label paramour-label">{{localize "BITD.labelHouse"}}:</label>
          <input type="text" name="data.house" value="{{data.house}}">
        </div>

        <table>
          <tr>
            <th><label>{{localize "BITD.labelEdge"}}</label></th>
            <th><label>{{localize "BITD.labelFlaw"}}</label></th>
          </tr>
          <tr>
            <td><input type="text" name="data.edgeOne" value="{{data.edgeOne}}"></td>
            <td><input type="text" name="data.flawOne" value="{{data.flawOne}}"></td>
          </tr>
          <tr>
            <td><input type="text" name="data.edgeTwo" value="{{data.edgeTwo}}"></td>
            <td><input type="text" name="data.flawTwo" value="{{data.flawTwo}}"></td>
          </tr>
        </table>

        <label class="black-label">{{localize "BITD.labelContacts"}}:</label>
        <textarea class="contacts" rows="8" name="data.contacts"></textarea>
      </div>



    </div>
    {{!-- Attributes --}}
    {{> "modules/court-of-blades/templates/attributes.html" actor=actor}}
  </section>

</form>
